services:
  bot:
    # Use the Dockerfile in the current directory to build the image
    build: .
    
    # Assign a custom name to the container for easy identification
    container_name: cowboys-bot

    # The volumes section creates a bind mount for the code and a named
    # volume for the data files. Docker will automatically create the
    # `mini-bot-data` volume the first time the bot runs.
    volumes:
      - .:/app
      - mini-bot-data:/app/data

    # Automatically restart the container if it crashes or the Docker daemon restarts.
    restart: unless-stopped

    # Environment variables are passed to the container at runtime.
    # It's best practice to use an .env file to manage sensitive information like your token.
    # Create a file named ".env" in the same directory as this docker-compose.yml file
    # and add the following lines to it:
    # CRUEL_STARS_TOKEN="YOUR_DISCORD_BOT_TOKEN_HERE"
    # GITHUB_TOKEN="YOUR_GITHUB_PERSONAL_ACCESS_TOKEN_HERE"
    env_file:
      - .env

# This declares the named volume that will be used by the bot service.
volumes:
  mini-bot-data:
